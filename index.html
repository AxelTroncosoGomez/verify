<!DOCTYPE html>
<html>
<head>
  <title>Email Verified</title>
  <script type="module">
    import { createClient } from 'https://esm.sh/@supabase/supabase-js'

    const supabase = createClient(
      'https://nzfrskgdvdhdfghjtaks.supabase.co',
      'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im56ZnJza2dkdmRoZGZnaGp0YWtzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI1MzAwMTMsImV4cCI6MjA2ODEwNjAxM30.Y9ub1e4oaIDoIGXxoAJkC_WJtZVxknSlRpOfID0EYVE'
    );

    const url = new URL(window.location.href);
    const access_token = url.searchParams.get('access_token');
    const type = url.searchParams.get('type');

    if (access_token && type === 'signup') {
      // Let user know
      document.body.innerHTML = "<h2>✅ Your email is verified! You can now return to the app.</h2>";

      // Optionally: Store in localStorage for desktop app pickup
      localStorage.setItem("verified", "true");

      // Optional: Redirect to app or wait
      setTimeout(() => {
        window.close(); // Closes browser tab (works in some environments)
      }, 3000);
    } else {
      document.body.innerHTML = "<h2>❌ Invalid or missing verification token.</h2>";
    }
  </script>
</head>
<body>
  <h2>Verifying...</h2>
</body>
</html>
